<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Interview Practice Partner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <style>
    body {
      font-family: Arial;
      padding: 20px;
      background: #f7f7f7;
    }

    h1 {
      margin-bottom: 10px;
    }

    .controls {
      margin-top: 10px;
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .messages {
      border: 1px solid #ccc;
      padding: 10px;
      height: 350px;
      overflow-y: auto;
      margin-top: 15px;
      background: #ffffff;
      border-radius: 8px;
    }

    .msg {
      padding: 10px;
      margin: 8px 0;
      border-radius: 6px;
      max-width: 85%;
    }

    .user {
      background: #e3f2fd;
      text-align: right;
      margin-left: auto;
    }

    .bot {
      background: #fff8e1;
      text-align: left;
      margin-right: auto;
    }

    .input-area {
      margin-top: 15px;
      display: flex;
      gap: 8px;
    }

    .input-area input {
      width: 60%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }

    button {
      padding: 10px 12px;
      background: #2563eb;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }

    button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .feedback {
      margin-top: 20px;
      padding: 15px;
      border: 1px solid #ccc;
      background: #fff3cd;
      border-radius: 8px;
      white-space: pre-wrap;
    }

    .hidden {
      display: none;
    }
  </style>
</head>

<body>

  <h1>Interview Practice Partner</h1>

  <div class="controls">
    <label>Role:
      <select id="role">
        <option>Software Engineer</option>
        <option>Data Analyst</option>
        <option>Sales Associate</option>
      </select>
    </label>

    <button id="startBtn">Start Interview</button>
    <button id="endBtn" disabled>End Interview</button>
  </div>

  <div id="messages" class="messages"></div>

  <div class="input-area">
    <input id="textInput" placeholder="Type your answer..." />
    <button id="sendBtn">Send</button>
    <button id="startMic">ðŸŽ¤</button>
    <button id="stopMic">â›”</button>
  </div>

  <div id="feedback" class="feedback hidden"></div>

  <script>
    let sessionStarted = false;
    let questionCount = 0;

    const messages = document.getElementById("messages");
    const textInput = document.getElementById("textInput");
    const sendBtn = document.getElementById("sendBtn");
    const startBtn = document.getElementById("startBtn");
    const endBtn = document.getElementById("endBtn");
    const feedbackBox = document.getElementById("feedback");

    function addMessage(text, who) {
      const div = document.createElement("div");
      div.className = `msg ${who}`;
      div.textContent = (who === "user" ? "You: " : "Bot: ") + text;
      messages.appendChild(div);
      messages.scrollTop = messages.scrollHeight;
    }

    // Start Interview
    startBtn.onclick = () => {
      sessionStarted = true;
      questionCount = 0;
      addMessage("Interview started for role: " + document.getElementById("role").value, "bot");
      startBtn.disabled = true;
      endBtn.disabled = false;
      feedbackBox.classList.add("hidden");
    };

    // End Interview
    endBtn.onclick = () => {
      sessionStarted = false;
      addMessage("Interview ended. Generating feedback...", "bot");

      feedbackBox.textContent =
        "ðŸ“Š FEEDBACK\n\n" +
        "- Strength: Good clarity\n" +
        "- Improvement: Add more specific examples\n" +
        "- Suggestion: Use STAR method in answers\n" +
        "- Overall: You are improving! Keep practicing.";

      feedbackBox.classList.remove("hidden");

      endBtn.disabled = true;
      startBtn.disabled = false;
    };

    // Send answer
    sendBtn.onclick = () => {
      const text = textInput.value.trim();
      if (!text) return;

      addMessage(text, "user");
      textInput.value = "";

      questionCount++;

      if (questionCount >= 10) {
        endBtn.onclick();
        return;
      }

      // Mini follow-up system (temporary until backend)
      const followups = [
        "Can you give a specific example?",
        "What tools did you use?",
        "What challenge did you face?",
        "How did you measure success?",
        "What was your role in the project?"
      ];

      const botQ = followups[questionCount % followups.length];

      setTimeout(() => addMessage(botQ, "bot"), 300);
    };

    // SPEECH TO TEXT
    let rec;
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition;

    document.getElementById("startMic").onclick = () => {
      if (!SR) return alert("Speech Recognition not supported (use Chrome)");

      rec = new SR();
      rec.lang = "en-US";
      rec.interimResults = false;

      rec.onresult = (e) => {
        const text = e.results[0][0].transcript;
        textInput.value = text;
        sendBtn.onclick();
      };

      rec.start();
    };

    document.getElementById("stopMic").onclick = () => {
      if (rec) rec.stop();
    };
  </script>

</body>
</html>


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Interview Practice Partner</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg: #0f172a;
      --card: #0b1220;
      --accent: linear-gradient(90deg, #2563eb, #8b5cf6);
      --muted: #94a3b8;
      --glass: rgba(255,255,255,0.04);
      --success: #16a34a;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
      background: radial-gradient(1200px 600px at 10% 10%, rgba(99,102,241,0.12), transparent),
                  radial-gradient(1000px 400px at 90% 90%, rgba(37,99,235,0.08), transparent),
                  var(--bg);
      color: #e6eef8;
      padding:28px;
    }

    .container{
      max-width:1080px;
      margin:0 auto;
      display:grid;
      grid-template-columns: 360px 1fr;
      gap:20px;
    }

    header{
      grid-column: 1 / -1;
      display:flex;
      gap:16px;
      align-items:center;
    }

    .logo{
      width:56px;height:56px;border-radius:12px;background:var(--accent);display:flex;align-items:center;justify-content:center;font-weight:700;box-shadow:0 8px 30px rgba(99,102,241,0.12);
    }

    h1{font-size:20px;margin:0}
    p.lead{margin:0;color:var(--muted);font-size:13px}

    /* left panel */
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      padding:18px;border-radius:14px;box-shadow:0 6px 20px rgba(2,6,23,0.6);
      min-height:520px;display:flex;flex-direction:column;gap:12px;border:1px solid rgba(255,255,255,0.03)
    }

    label{display:block;font-size:13px;color:var(--muted);}
    select{width:100%;padding:10px;border-radius:8px;border:none;background:transparent;color:inherit;border:1px solid rgba(255,255,255,0.04)}

    .controls{display:flex;gap:10px;margin-top:6px}
    .btn{flex:1;padding:10px 12px;border-radius:10px;border:none;cursor:pointer;font-weight:600}
    .btn-primary{background:var(--accent);color:white}
    .btn-ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)}

    .role-desc{font-size:13px;color:var(--muted);margin-top:6px}

    .q-list{margin-top:12px;flex:1;overflow:auto;padding-right:6px}
    .q-item{padding:8px 10px;border-radius:8px;background:var(--glass);margin-bottom:8px;font-size:13px;color:#cfe3ff}

    /* right panel */
    .stage{
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      padding:18px;border-radius:14px;box-shadow:0 6px 30px rgba(2,6,23,0.6);
      min-height:520px;display:flex;flex-direction:column;gap:12px;border:1px solid rgba(255,255,255,0.03)
    }

    .messages{flex:1;overflow:auto;padding:14px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.018), rgba(255,255,255,0.008));border:1px solid rgba(255,255,255,0.02)}
    .msg{margin-bottom:12px;max-width:85%;padding:12px;border-radius:10px}
    .msg.user{background:linear-gradient(90deg, rgba(37,99,235,0.12), rgba(139,92,246,0.08));margin-left:auto;text-align:right;color:#eaf2ff}
    .msg.bot{background:rgba(255,255,255,0.02);color: #dbeafe}

    .input-area{display:flex;gap:8px;margin-top:8px}
    .input-area input{flex:1;padding:12px;border-radius:10px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    .icon-btn{padding:10px;border-radius:10px;border:1px solid rgba(255,255,255,0.03);background:transparent;cursor:pointer}

    .feedback{padding:14px;border-radius:10px;background:linear-gradient(90deg, rgba(22,163,74,0.08), rgba(37,99,235,0.04));color:#eafff0;border:1px solid rgba(22,163,74,0.12)}

    .meta{display:flex;gap:10px;align-items:center;font-size:13px;color:var(--muted)}
    .progress{height:8px;background:rgba(255,255,255,0.03);border-radius:999px;overflow:hidden;flex:1}
    .progress > i{display:block;height:100%;background:linear-gradient(90deg,#22c55e,#2563eb);width:0%}

    footer{grid-column: 1 / -1;margin-top:8px;color:var(--muted);font-size:13px;display:flex;justify-content:space-between}

    @media (max-width:980px){
      .container{grid-template-columns:1fr;}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">IP</div>
      <div>
        <h1>Interview Practice Partner</h1>
        <p class="lead">Practice interviews with role-based predefined questions and live voice input.</p>
      </div>
    </header>

    <aside class="panel">
      <div>
        <label for="role">Role</label>
        <select id="role">
          <option>Software Engineer</option>
          <option>Data Analyst</option>
          <option>Sales Associate</option>
        </select>
        <div class="role-desc" id="roleDesc">Choose a role to load curated questions.</div>
      </div>

      <div class="controls">
        <button id="startBtn" class="btn btn-primary">Start Interview</button>
        <button id="endBtn" class="btn btn-ghost" disabled>End</button>
      </div>

      <div style="display:flex;gap:8px;margin-top:8px;">
        <button id="prevQ" class="btn btn-ghost">Previous</button>
        <button id="nextQ" class="btn btn-ghost">Next</button>
      </div>

      <div class="q-list" id="qList" aria-live="polite"></div>
    </aside>

    <main class="stage">
      <div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
        <div class="meta">
          <div id="status">Status: <strong>Idle</strong></div>
          <div class="progress" style="width:220px"><i id="progressBar"></i></div>
          <div id="qCount">0 / 0</div>
        </div>

        <div style="display:flex;gap:8px;align-items:center">
          <button id="startMic" class="icon-btn" title="Start mic">ðŸŽ¤</button>
          <button id="stopMic" class="icon-btn" title="Stop mic">â›”</button>
          <button id="copySession" class="icon-btn" title="Copy session">ðŸ“‹</button>
        </div>
      </div>

      <div id="messages" class="messages" role="log"></div>

      <div class="input-area">
        <input id="textInput" placeholder="Type your answer or use voice..." autocomplete="off" />
        <button id="sendBtn" class="btn btn-primary">Send</button>
      </div>

      <div id="feedback" class="feedback" style="display:none"></div>
    </main>

    <footer>
      <div>Tip: Use STAR â€” Situation, Task, Action, Result.</div>
      <div>Designed for practice â€¢ v2</div>
    </footer>
  </div>

  <script>
    // PREDEFINED QUESTIONS (10 per role)
    const predefined = {
      "Software Engineer": [
        "Describe a challenging bug you fixed. What steps did you take?",
        "Explain a system you designed. How did you decide the architecture?",
        "How do you approach code reviews and giving feedback?",
        "What are the differences between process and thread?",
        "Explain a time you improved performance in an application.",
        "How do you test your code? Describe unit, integration, and E2E tests.",
        "Describe how you would design a rate limiter for an API.",
        "What's the most important data structure you use and why?",
        "How do you debug memory leaks or high CPU usage?",
        "Tell me about a time you worked in a cross-functional team."
      ],

      "Data Analyst": [
        "Describe a project where you used data to solve a business problem.",
        "How do you handle missing or dirty data? Give concrete steps.",
        "Explain the differences between correlation and causation.",
        "What is A/B testing? Walk me through designing an experiment.",
        "Which visualization do you choose for categorical vs continuous data?",
        "Describe a time you automated a repetitive data task.",
        "Explain how you would detect and handle outliers.",
        "How do you validate a predictive model before deployment?",
        "Which SQL techniques do you use for performance optimization?",
        "Tell me about a dashboard you built and the metrics you tracked."
      ],

      "Sales Associate": [
        "How do you handle an objection from a potential customer?",
        "Describe your process for qualifying leads.",
        "Give an example where you exceeded your sales target. What did you do?",
        "How do you build long-term relationships with clients?",
        "Explain how you use data or CRM to prioritize outreach.",
        "Describe a time you turned a â€˜noâ€™ into a â€˜yesâ€™.",
        "What strategies do you use to manage a pipeline?",
        "How do you tailor your pitch to different buyer personas?",
        "Explain a negotiation you led and the outcome.",
        "How do you handle competing priorities and time management in sales?"
      ]
    };

    // UI elements
    const roleEl = document.getElementById('role');
    const roleDesc = document.getElementById('roleDesc');
    const startBtn = document.getElementById('startBtn');
    const endBtn = document.getElementById('endBtn');
    const messagesEl = document.getElementById('messages');
    const textInput = document.getElementById('textInput');
    const sendBtn = document.getElementById('sendBtn');
    const qList = document.getElementById('qList');
    const startMic = document.getElementById('startMic');
    const stopMic = document.getElementById('stopMic');
    const status = document.getElementById('status');
    const progressBar = document.getElementById('progressBar');
    const qCountEl = document.getElementById('qCount');
    const prevQ = document.getElementById('prevQ');
    const nextQ = document.getElementById('nextQ');
    const copySession = document.getElementById('copySession');
    const feedbackBox = document.getElementById('feedback');

    let session = {
      active:false,
      role: roleEl.value,
      idx: 0,
      asked:0
    };

    function loadQList(){
      const arr = predefined[session.role] || [];
      qList.innerHTML = '';
      arr.forEach((q,i)=>{
        const el = document.createElement('div');
        el.className = 'q-item';
        el.textContent = `${i+1}. ${q}`;
        qList.appendChild(el);
      });
      qCountEl.textContent = `0 / ${arr.length}`;
    }

    function setRoleDesc(){
      roleDesc.textContent = `Curated ${predefined[roleEl.value].length} questions for ${roleEl.value}.`;
    }

    roleEl.addEventListener('change', ()=>{
      session.role = roleEl.value;
      setRoleDesc();
      loadQList();
    });

    // initial
    setRoleDesc();
    loadQList();

    function addMessage(text, who){
      const div = document.createElement('div');
      div.className = 'msg ' + (who === 'user'? 'user' : 'bot');
      div.textContent = (who === 'user' ? 'You: ' : 'Interviewer: ') + text;
      messagesEl.appendChild(div);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }

    function startInterview(){
      session.active = true;
      session.idx = 0;
      session.asked = 0;
      startBtn.disabled = true; endBtn.disabled = false;
      roleEl.disabled = true;
      status.innerHTML = 'Status: <strong>In Progress</strong>';
      addMessage('Interview started for role: ' + session.role, 'bot');
      showQuestion(session.idx);
    }

    function endInterview(){
      session.active = false;
      startBtn.disabled = false; endBtn.disabled = true;
      roleEl.disabled = false;
      status.innerHTML = 'Status: <strong>Ended</strong>';
      addMessage('Interview ended. Generating feedback...', 'bot');

      // simple feedback
      feedbackBox.style.display = 'block';
      feedbackBox.textContent = `ðŸ“Š FEEDBACK\n\n- Strength: Clear responses on average\n- Improvement: Add more metrics & specifics\n- Suggestion: Structure answers with STAR\n- Questions answered: ${session.asked}`;
    }

    function showQuestion(i){
      const arr = predefined[session.role];
      if(!arr || i < 0 || i >= arr.length) return;
      // highlight in list
      [...qList.children].forEach((el, idx)=> el.style.opacity = idx===i? '1':'0.45');

      // display question as bot message
      addMessage(arr[i], 'bot');
      session.idx = i;
      qCountEl.textContent = `${session.asked} / ${arr.length}`;
      progressBar.style.width = `${Math.round((session.asked/arr.length)*100)}%`;
    }

    startBtn.addEventListener('click', startInterview);
    endBtn.addEventListener('click', endInterview);
    nextQ.addEventListener('click', ()=>{
      const arr = predefined[session.role];
      if(!arr) return;
      const next = Math.min(session.idx + 1, arr.length-1);
      showQuestion(next);
    });
    prevQ.addEventListener('click', ()=>{
      const prev = Math.max(session.idx - 1, 0);
      showQuestion(prev);
    });

    // send answer
    sendBtn.addEventListener('click', ()=>{
      const text = textInput.value.trim();
      if(!text) return;
      addMessage(text, 'user');
      textInput.value = '';
      session.asked += 1;
      qCountEl.textContent = `${session.asked} / ${predefined[session.role].length}`;
      progressBar.style.width = `${Math.round((session.asked/predefined[session.role].length)*100)}%`;

      // auto-advance to next question if available
      const next = session.idx + 1;
      if(next < predefined[session.role].length){
        setTimeout(()=> showQuestion(next), 400);
      } else {
        // end interview after last question
        setTimeout(()=> endInterview(), 600);
      }
    });

    // copy session
    copySession.addEventListener('click', ()=>{
      const lines = [...messagesEl.querySelectorAll('.msg')].map(n=>n.textContent);
      navigator.clipboard.writeText(lines.join('\n')).then(()=>{
        alert('Session copied to clipboard');
      });
    });

    // Speech recognition (graceful)
    const SR = window.SpeechRecognition || window.webkitSpeechRecognition || null;
    let rec = null;
    if(!SR){
      startMic.disabled = true; stopMic.disabled = true;
      startMic.title = 'Speech not supported in this browser.';
    }

    startMic.addEventListener('click', ()=>{
      if(!SR) return alert('Speech Recognition not supported (use Chrome/Edge)');
      rec = new SR();
      rec.lang = 'en-IN';
      rec.interimResults = false;
      rec.maxAlternatives = 1;
      rec.onresult = (e)=>{
        const text = e.results[0][0].transcript;
        textInput.value = text;
        // optionally auto-send
        // sendBtn.click();
      };
      rec.onerror = (e)=>{ console.error('SR error', e); alert('Speech error: ' + (e.error || 'unknown')) };
      rec.start();
      status.innerHTML = 'Status: <strong>Listeningâ€¦</strong>';
    });

    stopMic.addEventListener('click', ()=>{
      if(rec) try{ rec.stop(); status.innerHTML = 'Status: <strong>In Progress</strong>'; }catch(e){}
    });

    // accessibility: allow selecting a question from the list to jump
    qList.addEventListener('click', (ev)=>{
      const idx = [...qList.children].indexOf(ev.target.closest('.q-item'));
      if(idx >=0) showQuestion(idx);
    });

    // keyboard: enter to send
    textInput.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter') sendBtn.click();
    });

  </script>
</body>
</html>
